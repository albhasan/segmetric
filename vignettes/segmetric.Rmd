---
title: "segmetric"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{segmetric}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Test code

```{r}
library(magrittr)
library(segmetric)

ref_shp <- system.file("extdata", "ground_truth", 
                       "crop_10m_resolution.shp", 
                       package = "segmetric")
seg_shp <- system.file("extdata", "segmentation", 
                       "ae_seg_s032020_meanshift_sr5_rr5_s10.shp",
                       package = "segmetric")

plot(sf::st_geometry(sf::st_read(ref_shp)), 
     lty = 1, 
     lwd = 1, 
     reset = FALSE, 
     col = "yellow", 
     main = "Reference (yellow) and Segmentation data.")
plot(sf::st_geometry(sf::st_read(seg_shp)), 
     lty = 1, 
     lwd = 1, 
     add = TRUE)

data_lst <- metric(ref_shp, seg_shp)

get_metric(data_lst, metric = "OS1") %>% summary()
get_metric(data_lst, metric = "US1") %>% summary()
get_metric(data_lst, metric = "OS2") %>% summary()
get_metric(data_lst, metric = "US2") %>% summary()
get_metric(data_lst, metric = "AFI") %>% summary()
get_metric(data_lst, metric = "QR") %>% summary()
get_metric(data_lst, metric = "D_index") %>% summary()
get_metric(data_lst, metric = "recall") %>% summary()

```

